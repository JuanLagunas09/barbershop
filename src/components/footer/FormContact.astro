<div
  class="hidden lg:block col-span-3 lg:ml-[10%] transition-all duration-500 ease-in-out container-form-desk"
>
  <div
    id="container-form-contact-layout"
    class="md:w-7/12 md:mx-auto lg:w-full lg:mx-0"
  >
    <div class="text-center lg:text-left">
      <h3
        class="text-title-color font-bold text-xl md:text-2xl hidden lg:block"
      >
        Contacto
      </h3>
      <h3
        class="text-button-color font-bold text-xl md:text-2xl lg:hidden uppercase"
      >
        ¿Cómo podemos ayudarte?
      </h3>
    </div>
    <form
      action=""
      id="form-contact"
      name="form-contact"
      class="transition-all duration-500 ease-in-out my-7 lg:my-0"
    >
      <div class="mt-4">
        <label for="name" class="block mb-1 text-sm font-medium text-font-color"
          >Nombre:</label
        >
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Ej. Juan Pérez"
          class="bg-transparent border border-font-color text-font-color rounded-md block w-full py-2 px-3 focus:outline-none focus:ring-0"
        />
      </div>

      <div class="mt-4">
        <label
          for="phone"
          class="block mb-1 text-sm font-medium text-font-color"
          >Teléfono:</label
        >
        <input
          type="text"
          id="phone"
          name="phone"
          placeholder="Ej. 1234567890"
          class="bg-transparent border border-font-color text-font-color rounded-md block w-full py-2 px-3 focus:outline-none focus:ring-0"
        />
      </div>

      <div class="mt-4">
        <label
          for="services"
          class="block mb-1 text-sm font-medium text-font-color">Motivo:</label
        >
        <select
          id="services"
          name="services"
          class="bg-transparent border border-font-color text-font-color rounded-md block w-full py-2 px-3 focus:outline-none focus:ring-0"
        >
          <option value="corte hombre">Corte hombre</option>
          <option value="corte mujer">Corte mujer</option>
          <option value="peinado mujer">Peinado mujer</option>
        </select>
      </div>

      <div class="w-full flex justify-center mt-7 lg:mt-5">
        <button
          type="submit"
          id="send-form"
          class="bg-transparent hover:border-button-color text-font-color hover:text-button-color font-semibold py-2 px-20 border border-font-color hover:border-transparent rounded"
        >
          <span id="text-send"> Enviar </span>
          <span id="loading-spin"></span>
        </button>
      </div>
    </form>
  </div>
</div>

<style>
  @keyframes spinLoading {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  #loading-spin {
    display: none;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top: 2px solid #fff;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: spinLoading 1s linear infinite;
    margin-left: 10px;
  }
</style>
<script type="module">
  import sweetalert2 from "https://cdn.jsdelivr.net/npm/sweetalert2@11.11.1/+esm";

  (function () {
    emailjs.init({
      publicKey: "p204l74nrbPwE2i5O",
    });
  })();

  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("form-contact");
    const submitBtn = document.getElementById("send-form");
    const loadingSpin = document.getElementById("loading-spin");
    const textSend = document.getElementById("text-send");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      submitBtn.disabled = true;
      loadingSpin.style.display = "inline-block";
      textSend.style.display = "none";

      const name = document.getElementById("name").value;
      const phone = document.getElementById("phone").value;
      const services = document.getElementById("services").value;

      try {
        const response = await emailjs.send(
          "service_eerjzke",
          "template_uin3ve1",
          {
            name,
            phone,
            services,
          }
        );

        if (response.status === 200) {
          sweetalert2
            .fire({
              title: "¡Gracias!",
              text: "Pronto nos pondremos en contacto contigo.",
              icon: "success",
              confirmButtonText: "Aceptar",
            })
            .then(() => {
              form.reset();
              submitBtn.disabled = false;
              loadingSpin.style.display = "none";
              textSend.style.display = "inline-block";
            });
        }
      } catch (error) {
        sweetalert2
          .fire({
            title: "¡Ups!",
            text: "Ocurrió un error al enviar tu mensaje.",
            icon: "error",
            confirmButtonText: "Aceptar",
          })
          .then(() => {
            submitBtn.disabled = false;
            loadingSpin.style.display = "none";
            textSend.style.display = "inline-block";
          });
      }
    });
  });
</script>
